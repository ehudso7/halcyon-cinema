# ================================================
# HALCYON-Cinema Environment Configuration
# ================================================
# LOCAL DEVELOPMENT:
#   Copy this file to .env.local and fill in the values:
#     cp .env.example .env.local
#
# VERCEL DEPLOYMENT:
#   When you connect Supabase via Vercel's Storage tab, most of these
#   variables are automatically populated in your Vercel environment.
# ================================================

# ================================================
# REQUIRED: Authentication Configuration
# ================================================
# Generate a secret with: openssl rand -base64 32
#
# ⚠️  CRITICAL: This is REQUIRED for authentication to work!
#     Without this, users cannot sign up or log in.
NEXTAUTH_SECRET=your_nextauth_secret_here
NEXTAUTH_URL=http://localhost:3000

# ================================================
# REQUIRED: Database Configuration (Supabase PostgreSQL)
# ================================================
# These are automatically set when you connect Supabase via Vercel's
# Storage integration. For local development, get these from your
# Supabase project dashboard: Settings → Database
#
# Primary connection URL (used by the application)
POSTGRES_URL=postgres://postgres.xxxxxxxxxxxx:password@aws-0-region.pooler.supabase.com:6543/postgres

# Alternative connection URLs provided by Vercel/Supabase integration
# POSTGRES_PRISMA_URL - For Prisma ORM with connection pooling (pgbouncer)
# POSTGRES_URL_NON_POOLING - Direct connection without pooling
POSTGRES_PRISMA_URL=postgres://postgres.xxxxxxxxxxxx:password@aws-0-region.pooler.supabase.com:6543/postgres?pgbouncer=true
POSTGRES_URL_NON_POOLING=postgres://postgres.xxxxxxxxxxxx:password@aws-0-region.supabase.com:5432/postgres

# Individual connection components (provided by Vercel integration)
# These are used when POSTGRES_URL is not set
POSTGRES_DATABASE=postgres
POSTGRES_HOST=db.xxxxxxxxxxxx.supabase.co
POSTGRES_PASSWORD=your_database_password
POSTGRES_USER=postgres
# POSTGRES_PORT=6543                       # Default: 6543 (Supabase pooler). Use 5432 for direct connections.

# ================================================
# REQUIRED: Supabase API Configuration
# ================================================
# These are set automatically when connecting Supabase via Vercel.
# Get these from Supabase dashboard: Settings → API
#
# Public keys (safe for client-side, prefixed with NEXT_PUBLIC_)
# The anon key is used for client-side Supabase requests (protected by RLS)
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Server-side only keys (keep these secret!)
SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
SUPABASE_JWT_SECRET=your_jwt_secret_here
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ================================================
# OPTIONAL: OpenAI API Key for AI Features
# ================================================
# Get your API key from: https://platform.openai.com/api-keys
# Without this, AI image generation features won't work
# OPENAI_API_KEY=your_openai_api_key_here

# ================================================
# OPTIONAL: Stripe Payment Configuration
# ================================================
# Get your API keys from: https://dashboard.stripe.com/apikeys
# Without these, payment features won't work.
#
# Secret key (keep this secret!)
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
#
# Webhook secret for signature verification
# Get this from: https://dashboard.stripe.com/webhooks
# Create a webhook endpoint pointing to: https://your-domain.com/api/payments/webhook
# Events to listen for: checkout.session.completed, customer.subscription.created,
#   customer.subscription.updated, customer.subscription.deleted,
#   invoice.payment_succeeded, invoice.payment_failed
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
#
# ------------------------------------------------
# Stripe Price IDs (create products in Stripe Dashboard)
# ------------------------------------------------
# One-time credit purchases
STRIPE_PRICE_CREDITS_50=price_your_50_credits_price_id
STRIPE_PRICE_CREDITS_100=price_your_100_credits_price_id
STRIPE_PRICE_CREDITS_250=price_your_250_credits_price_id
STRIPE_PRICE_CREDITS_500=price_your_500_credits_price_id
STRIPE_PRICE_CREDITS_1000=price_your_1000_credits_price_id
#
# Subscription plans (recurring monthly)
STRIPE_PRICE_STARTER=price_your_starter_plan_price_id
STRIPE_PRICE_CREATOR=price_your_creator_plan_price_id
STRIPE_PRICE_STUDIO=price_your_studio_plan_price_id

# ================================================
# ENVIRONMENT DETECTION (Set automatically)
# ================================================
# These are set automatically by Vercel/Next.js
# VERCEL=1                                # Set to "1" when running on Vercel
# NODE_ENV=production                     # "development", "production", or "test"

# ================================================
# OPTIONAL: Testing Configuration
# ================================================
# TEST_BASE_URL=http://localhost:3000     # Base URL for E2E tests

# ================================================
# OPTIONAL: SSL Configuration for Database
# ================================================
# Control SSL behavior for database connections.
#
# Security defaults:
# - Production (non-Vercel): SSL with strict certificate validation
# - Production (Vercel): SSL without strict validation (secured at infrastructure level)
# - Development: No SSL by default
#
# DB_SSL=false                           # Disable SSL entirely (not recommended for production)
# DB_SSL=true                            # Enable SSL in development
# DB_SSL_REJECT_UNAUTHORIZED=true        # Enable strict validation
# DB_SSL_REJECT_UNAUTHORIZED=false       # Disable strict certificate validation
# DB_SSL_CA=                             # Custom CA certificate (PEM format)

# ================================================
# OPTIONAL: Connection Pool Configuration
# ================================================
# Fine-tune database connection pool behavior.
# These have sensible defaults and typically don't need to be changed.
#
# DB_POOL_MAX=10                         # Maximum connections in pool (default: 10)
# DB_IDLE_TIMEOUT=30000                  # Close idle connections after ms (default: 30000)
# DB_CONNECTION_TIMEOUT=10000            # Connection acquisition timeout ms (default: 10000)
